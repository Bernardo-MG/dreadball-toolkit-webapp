<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/jdbc
        http://www.springframework.org/schema/jdbc/spring-jdbc.xsd
      http://www.springframework.org/schema/context 
      http://www.springframework.org/schema/context/spring-context.xsd">

   <!-- Properties -->
   <context:property-placeholder
      location="classpath:config/persistence-@spring.profile.database@.properties" />

   <!-- Scans for services -->
   <context:component-scan base-package="com.wandrell.tabletop.dreadball.web.toolkit" />

   <!-- Other services -->
   <bean id="dbxRules" class="${service.rules.version}" />

   <!-- Database initializer -->
   <jdbc:initialize-database data-source="dataSource">
      <jdbc:script location="${jdbc.script.drop.common}" />
      <!-- <jdbc:script location="${jdbc.script.drop.dbo}" /> -->
      <jdbc:script location="${jdbc.script.drop.dbx}" />
      <jdbc:script location="${jdbc.script.init.common}" />
      <!-- <jdbc:script location="${jdbc.script.init.dbo}" /> -->
      <jdbc:script location="${jdbc.script.init.dbx}" />
      <jdbc:script location="${jdbc.script.load.common}" />
      <!-- <jdbc:script location="${jdbc.script.load.dbo}" /> -->
      <jdbc:script location="${jdbc.script.load.dbx}" />
   </jdbc:initialize-database>

   <!-- Profile-based configuration -->
   <beans profile="h2">
      <!-- H2 in-memory database -->
      <!-- To be used for development -->
      <context:property-placeholder
         location="classpath:config/persistence-h2.properties, 
                   classpath:config/persistence-access.properties" />
   </beans>
   <beans profile="mysql">
      <!-- MySQL database -->
      <!-- To be used for deployment -->
      <context:property-placeholder
         location="classpath:config/persistence-mysql.properties, 
                   classpath:config/persistence-access.properties" />
   </beans>
   
</beans>